<h3 style="padding: 10px;">Cadastrar Novo Pedido</h3>

<form style="padding: 10px" #formValidate="ngForm">

  <div class="form-row">
    <div class="form-group col-md-1">
      <label for="id">Numero Do Pedido</label>
      <input type="text" [(ngModel)]="pedido.id" class="form-control" id="id" readonly="true" name="id"
        autocomplete="false">
    </div>
  </div>
  <div class="form-group col-md-3"> 
    <button class="btn btn-success" (click)="aprovarPedido()">Aprovar Pedido</button>
    <button class="btn btn-danger" style="margin-left: 10px;" (click)="cancelarPedido()">Cancelar Pedido</button>
  </div>
   
    
    <div class="form-row">
      <div class="form-group col-md-12">
        <label for="descricao">Descrição</label>
        <span style="color: red; font-size: 23px;" *ngIf="nomeValidate.invalid"> *</span>
        <input type="text" [(ngModel)]="pedido.descricao" #nomeValidate="ngModel" class="form-control" id="descricao"
          required="true" name="descricao" autocomplete="false">

      </div>
    </div>

    <div class="form-row">

      <div class="form-group col-md-3">
        <label for="data">Data</label>
        <span style="color: red; font-size: 23px;"> *</span>
        <div class="input-group">
          <input name="data" type="text" class="form-control" placeholder="dd/mm/yyyy" ngbDatepicker
            #data="ngbDatepicker" [(ngModel)]="pedido.data" id="data" required="true">
          <div class="input-group-append">
            <button class="btn btn-primary" (click)="data.toggle()" type="button"></button>
          </div>
        </div>
      </div>
    </div>


    <div class="card text-center">
      <div class="card-header">
        Itens do pedido
      </div>
      <div class="card-body" style="padding-left: 1px;">

        <div class="form-row">
          <div class="form-group col-md-3">
            <label>Nome</label>
            <span style="color: red; font-size: 23px;" *ngIf="nomeItenValidate.invalid"> *</span>
            <input type="text" [(ngModel)]="itens.nomeIten" #nomeItenValidate="ngModel" class="form-control"
              id="nomeIten" required="true" name="nomeIten" autocomplete="false">

          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-3">
            <label>Qauntidade</label>
            <span style="color: red; font-size: 23px;" *ngIf="quantidadeValidate.invalid"> *</span>
            <input type="number" [(ngModel)]="itens.quantidade" #quantidadeValidate="ngModel" class="form-control"
              id="quantidade" required="true" name="quantidade" autocomplete="false">

          </div>

          <div class="form-group col-md-3">
            <label>Valor Unitário</label>
            <span style="color: red; font-size: 23px;" *ngIf="valorUnidadeValidate.invalid"> *</span>
            <input [(ngModel)]="itens.valorUnidade" #valorUnidadeValidate="ngModel" class="form-control"
              id="valorUnidade" currencyMask [options]="{prefix : 'R$', thousands: '.', decimal : ','}" required="true"
              name="valorUnidade" autocomplete="false">
          </div>

          <div class="form-group col-md-3">
            <label>Desconto</label>
            <span style="color: red; font-size: 23px;" *ngIf="valorDescontoValidate.invalid"> *</span>
            <input [(ngModel)]="itens.valorDesconto" #valorDescontoValidate="ngModel" class="form-control"
              id="valorDesconto" currencyMask [options]="{prefix : 'R$', thousands: '.', decimal : ','}"
              required="true" name="valorDesconto" autocomplete="false">
          </div>

          <div class="form-group col-md-3">
            <label>Valor Total</label>
            <span style="color: red; font-size: 23px;" *ngIf="valorTotalValidate.invalid"> *</span>
            <input [(ngModel)]="itens.valorTotal" #valorTotalValidate="ngModel" class="form-control" id="valorTotal"
            currencyMask [options]="{prefix : 'R$', thousands: '.', decimal : ','}" required="true" name="valorTotal"
              autocomplete="false">
          </div>


          <div class="form-group col-md-2">
            <button class="btn btn-primary" (click)="addItens()">Adicionar</button>
          </div>
        </div>
      </div>
    </div>

    <table class="table table-ms table-dark">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">NOME</th>
          <th scope="col">QUANTIDADE</th>
          <th scope="col">VALOR UNIDADE</th>
          <th scope="col">DESCONTO</th>
          <th scope="col">TOTAL</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of pedido.itens; let i = index">
          <td>{{p.id}}</td>
          <td>{{p.nomeIten}}</td>
          <td>{{p.quantidade}}</td>
          <td>{{p.valorUnidade}}</td>
          <td>{{p.valorDesconto}}</td>
          <td>{{p.valorTotal}}</td>

          <td><button (click)="excluirItens(p.id,i)" class="btn btn-danger">Excluir</button></td>

        </tr>
      </tbody>
    </table>


    <div class="form-row" style="margin-top: 20px;">
      <div class="form-group col-md-6">
        <button type="button" class="btn btn-primary" [routerLink]="['/listpedido']"
          routerLinkActive="router-link-active">
          Voltar
        </button>
        <button type="button" class="btn btn-primary" (click)="novoPedido()" style="margin-left: 10px;">Novo</button>
        <!---button type="button" class="btn btn-primary" (click)="novoPedido()" style="margin-left: 10px;">Novo</button-->
        <!--button type="button" class="btn btn-primary" [disabled]="formValidate.invalid" (click)="salvarPedido()"
              style="margin-left: 10px;">Salvar
      </button-->
        <button type="button" class="btn btn-primary" (click)="salvarPedido()" style="margin-left: 10px;">Salvar
        </button>
      </div>
    </div>
</form>